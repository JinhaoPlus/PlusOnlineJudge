<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap>
	<typeAlias type="com.jinhaoplus.oj.domain.Problem" alias="problem" />
	<typeAlias type="com.jinhaoplus.oj.domain.ProblemTest" alias="problemTest" />
	<typeAlias type="com.jinhaoplus.oj.domain.ProblemTestResult" alias="problemTestResult" />
	<!-- 获得全查询列表 -->
	<select id="getAllProblems" resultClass="problem">
		select 
			problem_id as problemId,
			problem_digest as problemDigest,
			problem_content as problemContent,
			problem_language as problemLanguage
		 from tbl_ploj_problems
	</select>

	<!-- 根据id获得用户对象 -->
	<select id="getProblemById" resultClass="problem">
		select 
			problem_id as problemId,
			problem_digest as problemDigest,
			problem_content as problemContent,
			problem_language as problemLanguage
		 from tbl_ploj_problems where problem_id=#value#
	</select>
	
	<!-- 根据问题id获得问题测试用例 -->
	<select id="getTestByProblemId" resultClass="problemTest">
		select 
			testid as problemTestId,
			test_problem_id as problemId,
			test_input as problemTestInput,
			test_output as problemTestOutput
		 from tbl_ploj_tests where test_problem_id=#value#
	</select>
	
	<!-- 将测试结果存入数据库 -->
	<insert id="insertTestResult" parameterClass="problemTestResult">
		insert into tbl_ploj_test_result
			(problem_id,test_id,result,oj_result)
			values
			(#problemId#,#testId#,#result#,#ojResult#)
	</insert>
</sqlMap>